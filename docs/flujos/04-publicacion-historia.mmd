sequenceDiagram
    title Flujo 4: Publicaci칩n de Historia

    actor Creador
    participant UI as UI Usuario
    participant GW as API Gateway
    participant Story as Story Service
    participant Broker as Message Broker
    participant Notif as Notification Service

    Creador->>UI: Click "Publicar"
    UI->>GW: POST /stories/:id/publish
    GW->>Story: Redirige
    Story->>Story: Valida grafo autom치ticamente
    Story->>Story: Cambia status a "published"

    Story-)Broker: Emite story.published

    Story-->>UI: 200 Historia publicada
    UI-->>Creador: Confirmaci칩n de publicaci칩n

    Broker-)Notif: Consume story.published
    Notif->>Notif: Notifica a suscriptores del autor
